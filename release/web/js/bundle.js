var __extends=this&&this.__extends||function(){var a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])};return function(t,e){function i(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}}();!function o(s,n,p){function u(e,t){if(!n[e]){if(!s[e]){var i="function"==typeof require&&require;if(!t&&i)return i(e,!0);if(c)return c(e,!0);var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}var r=n[e]={exports:{}};s[e][0].call(r.exports,function(t){return u(s[e][1][t]||t)},r,r.exports,o,s,n,p)}return n[e].exports}for(var c="function"==typeof require&&require,t=0;t<p.length;t++)u(p[t]);return u}({1:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=t("./StaticData"),a=function(){function t(t){this.img=t}return t.prototype.setPos=function(t){var e=t.x,i=t.y;this.img.x=e,this.img.y=i},t.prototype.addPassage=function(t){this.passage=t},t.prototype.removePassage=function(){this.passage=null},t.prototype.empty=function(){return!this.passage},t.prototype.getSprite=function(){return this.img},t.prototype.getPassage=function(){return this.passage},t.prototype.moveBoat=function(t){var e,i;void 0===t&&(t=!0);var a=1;return this.img.x===r.default.boat.left.x?(e=Object.create(r.default.boat.right),i=Object.create(r.default.rightRiverBankPos)):(e=Object.create(r.default.boat.left),i=Object.create(r.default.leftRiverBankPos),a=-1),t||(e.x-=150*a,i.x-=150*a),{boatPos:e,passagePos:i}},t}();i.default=a},{"./StaticData":7}],2:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(i){function t(t){var e=i.call(this)||this;return e.reset=t,e.restartBtn.on(Laya.Event.MOUSE_DOWN,e,e.restartGame),e}return __extends(t,i),t.prototype.restartGame=function(){this.reset.run(),this.removeSelf()},t}(t("./ui/layaMaxUI").ui.gameOverUI);i.default=a},{"./ui/layaMaxUI":9}],3:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o=t("./StaticData"),a=function(){function t(t,e,i,a,r){this.img=t,this.bindClickEvent(),this.typeStr=e,this.boat=i,this.riverBanks=a,this.succeed=r}return t.prototype.bindClickEvent=function(){this.img.on(Laya.Event.MOUSE_DOWN,this,this.jump)},t.prototype.setPos=function(t){var e=t.x,i=t.y;this.img.x=e,this.img.y=i},t.prototype.setRiverBanks=function(t){this.riverBanks=t},t.prototype.jump=function(){var t,e,i=this,a=1,r=!0;this.showMessage(),this.img.x<o.default.leftRiverBankPos.x?(t=o.default.leftRiverBankPos.x,e=o.default.leftRiverBankPos.y,this.boat.empty()?(this.boat.addPassage(this),this.riverBanks[o.default.index.LEFT_BANK].getOut(o.default[this.typeStr].index)):r=!1):this.img.x===o.default.leftRiverBankPos.x?(t=o.default[this.typeStr].left.x,e=o.default[this.typeStr].left.y,a=0,this.boat.removePassage(),this.riverBanks[o.default.index.LEFT_BANK].getIn(o.default[this.typeStr].index)):this.img.x===o.default.rightRiverBankPos.x?(t=o.default[this.typeStr].right.x,e=o.default[this.typeStr].right.y,a=-1,this.boat.removePassage(),this.riverBanks[o.default.index.RIGHT_BANK].getIn(o.default[this.typeStr].index)):(t=o.default.rightRiverBankPos.x,e=o.default.rightRiverBankPos.y,this.boat.empty()?(this.boat.addPassage(this),this.riverBanks[o.default.index.RIGHT_BANK].getOut(o.default[this.typeStr].index)):r=!1),r&&Laya.Tween.to(this.img,{x:t,y:e,rotation:360*a},1e3,Laya.Ease.backInOut,Laya.Handler.create(this,function(){i.riverBanks[1].succeed()&&i.succeed.run()}))},t.prototype.eat=function(t){Laya.Tween.to(this.img,{x:t.getSprite().x,y:t.getSprite().y},1e3,null,Laya.Handler.create(this,function(){t.getSprite().visible=!1}))},t.prototype.getTypeStr=function(){return this.typeStr},t.prototype.getSprite=function(){return this.img},t.prototype.showMessage=function(){var t=this.boat.getSprite().x===o.default.boat.left.x?"左岸":"右岸",e=this.boat.empty()?"上船":"下船",i=o.default[this.typeStr].name+"从"+t+e;o.default.message.text+=i+"\n"},t}();i.default=a},{"./StaticData":7}],4:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("./Script");new(function(){function t(){this.initUI()}return t.prototype.initUI=function(){Laya.init(1280,720),Laya.stage.bgColor="#ffffff";var t=[{url:"res/atlas/actors.atlas",type:Laya.Loader.ATLAS},{url:"actors/gameover.jpg"},{url:"actors/succeed.jpg"}];Laya.loader.load(t,Laya.Handler.create(this,function(){var t=new a.default;Laya.stage.addChild(t)}))},t}())},{"./Script":6}],5:[function(require,module,exports){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var StaticData_1=require("./StaticData"),RiverBank=function(){function RiverBank(t){this.items=t}return RiverBank.prototype.resetBankArr=function(t){this.items=t?[1,1,1]:[0,0,0]},RiverBank.prototype.getIn=function(t){this.items[t]=1},RiverBank.prototype.getOut=function(t){this.items[t]=0},RiverBank.prototype.EatOrNot=function(){return 2!==eval(this.items.join("+"))?null:this.items[StaticData_1.default.wolfPos.index]+this.items[StaticData_1.default.sheepPos.index]===2?[StaticData_1.default.wolfPos.index,StaticData_1.default.sheepPos.index]:this.items[StaticData_1.default.sheepPos.index]+this.items[StaticData_1.default.cabbagePos.index]===2?[StaticData_1.default.sheepPos.index,StaticData_1.default.cabbagePos.index]:null},RiverBank.prototype.succeed=function(){return 3===eval(this.items.join("+"))},RiverBank}();exports.default=RiverBank},{"./StaticData":7}],6:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=t("./ui/layaMaxUI"),r=t("./Item"),o=t("./Boat"),s=t("./StaticData"),n=t("./RiverBank"),p=t("./GameOver"),u=t("./Succeed"),c=function(e){function t(){var t=e.call(this)||this;return t.boat=new o.default(t.boatSprite),t.initActors(),t.bindGoEvent(),t.initMessage(),t}return __extends(t,e),t.prototype.initActors=function(){this.riverBanks=[new n.default([1,1,1]),new n.default([0,0,0])],this.items=new Array,this.items.push(new r.default(this.wolf,"wolfPos",this.boat,this.riverBanks,Laya.Handler.create(this,this.succeed))),this.items.push(new r.default(this.sheep,"sheepPos",this.boat,this.riverBanks,Laya.Handler.create(this,this.succeed))),this.items.push(new r.default(this.cabbage,"cabbagePos",this.boat,this.riverBanks,Laya.Handler.create(this,this.succeed)))},t.prototype.bindGoEvent=function(){this.go.on(Laya.Event.MOUSE_DOWN,this,this.gogogo)},t.prototype.gogogo=function(){var t=this;Laya.Mouse.hide(),this.showMessage();var e=this.boat.getSprite().x===s.default.boat.left.x?s.default.index.LEFT_BANK:s.default.index.RIGHT_BANK,i=this.riverBanks[e].EatOrNot();if(console.log("start moving boat"),i){var a=this.items[i[0]],r=this.items[i[1]];this.moveBoat(this.boat.moveBoat(!1),Laya.Handler.create(this,function(){t.eat(a,r,Laya.Handler.create(t,t.gameOver))}))}else this.moveBoat(this.boat.moveBoat(),Laya.Handler.create(this,function(){Laya.Mouse.show()}))},t.prototype.initMessage=function(){s.default.message.fontSize=15,s.default.message.x=9,s.default.message.y=228,this.addChild(s.default.message)},t.prototype.showMessage=function(){var t=this.boat.getPassage(),e=t?s.default[t.getTypeStr()].name:"空气",i="右岸",a="左岸";this.boat.getSprite().x===s.default.boat.left.x&&(i="左岸",a="右岸");var r="把"+e+"从"+i+"运输到"+a;s.default.message.text+=r+"\n"},t.prototype.moveBoat=function(t,e){var i=t.boatPos,a=t.passagePos;void 0===e&&(e=null),Laya.Tween.to(this.boat.getSprite(),i,2e3,null,Laya.Handler.create(this,function(){Laya.Mouse.show(),e.run()})),this.boat.getPassage()&&Laya.Tween.to(this.boat.getPassage().getSprite(),a,2e3,null)},t.prototype.eat=function(t,e,i){void 0===i&&(i=null),console.log(t,e),Laya.Tween.to(t.getSprite(),{x:e.getSprite().x,y:e.getSprite().y},1e3,null,Laya.Handler.create(this,function(){e.getSprite().visible=!1,i.run()}))},t.prototype.gameOver=function(){Laya.Mouse.show();var t=new p.default(Laya.Handler.create(this,this.reset));Laya.stage.addChild(t)},t.prototype.succeed=function(){var t=new u.default(Laya.Handler.create(this,this.reset));Laya.stage.addChild(t)},t.prototype.reset=function(){this.items.forEach(function(t){t.setPos(s.default[t.getTypeStr()].left),t.getSprite().visible=!0,t.getSprite().rotation=0}),this.boat.removePassage(),this.boat.setPos(s.default.boat.left),this.riverBanks[0].resetBankArr(!0),this.riverBanks[1].resetBankArr(!1),s.default.message.text=""},t}(a.ui.BackGroundUI);i.default=c},{"./Boat":1,"./GameOver":2,"./Item":3,"./RiverBank":5,"./StaticData":7,"./Succeed":8,"./ui/layaMaxUI":9}],7:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default={cabbagePos:{left:{x:10,y:164},right:{x:879,y:164},index:2,name:"卷心菜"},sheepPos:{left:{x:88,y:164},right:{x:970,y:164},index:1,name:"羊"},wolfPos:{left:{x:163,y:164},right:{x:1057,y:164},index:0,name:"狼"},leftRiverBankPos:{x:464,y:173},rightRiverBankPos:{x:771,y:173},boat:{left:{x:282,y:120},right:{x:589,y:120}},index:{WOLF:0,SHEEP:1,CABBAGE:2,LEFT_BANK:0,RIGHT_BANK:1},message:new Laya.Text}},{}],8:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var a=function(i){function t(t){var e=i.call(this)||this;return e.reset=t,e.againBtn.on(Laya.Event.MOUSE_DOWN,e,function(){e.again()}),e}return __extends(t,i),t.prototype.again=function(){this.reset.run(),this.removeSelf()},t}(t("./ui/layaMaxUI").ui.succeedUI);i.default=a},{"./ui/layaMaxUI":9}],9:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=Laya.Scene,o=Laya.ClassUtils.regClass;!function(t){var e=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"Scene",props:{width:1280,height:720},compId:2,child:[{type:"Sprite",props:{y:215,x:0,width:251,texture:"actors/riverbank.png",height:502},compId:58},{type:"Sprite",props:{y:480,x:1089,width:535,texture:"actors/riverbank.png",rotation:270,pivotY:219,pivotX:268,height:406},compId:65},{type:"Sprite",props:{y:164,x:10,width:58,var:"cabbage",texture:"actors/cabbage.png",height:58},compId:72},{type:"Sprite",props:{y:164,x:88,width:58,var:"sheep",texture:"actors/sheep.png",height:58},compId:70},{type:"Sprite",props:{y:164,x:163,width:58,var:"wolf",texture:"actors/wolf.png",height:58},compId:71},{type:"Box",props:{y:253,x:251,width:615,height:464},compId:80,child:[{type:"Sprite",props:{y:133,width:123,texture:"actors/river.png",name:"item0",height:123},compId:3},{type:"Sprite",props:{y:133,x:123,width:123,texture:"actors/river.png",name:"item1",height:123},compId:5},{type:"Sprite",props:{y:133,x:246,width:123,texture:"actors/river.png",name:"item2",height:123},compId:6},{type:"Sprite",props:{y:133,x:369,width:123,texture:"actors/river.png",name:"item3",height:123},compId:7},{type:"Sprite",props:{y:133,x:492,width:123,texture:"actors/river.png",name:"item4",height:123},compId:8},{type:"Sprite",props:{width:123,texture:"actors/river.png",name:"item0",height:123},compId:47},{type:"Sprite",props:{x:123,width:123,texture:"actors/river.png",name:"item1",height:123},compId:48},{type:"Sprite",props:{x:246,width:123,texture:"actors/river.png",name:"item2",height:123},compId:49},{type:"Sprite",props:{x:369,width:123,texture:"actors/river.png",name:"item3",height:123},compId:50},{type:"Sprite",props:{x:492,width:123,texture:"actors/river.png",name:"item4",height:123},compId:51},{type:"Sprite",props:{y:266,width:123,texture:"actors/river.png",name:"item0",height:123},compId:60},{type:"Sprite",props:{y:266,x:123,width:123,texture:"actors/river.png",name:"item1",height:123},compId:61},{type:"Sprite",props:{y:266,x:246,width:123,texture:"actors/river.png",name:"item2",height:123},compId:62},{type:"Sprite",props:{y:266,x:369,width:123,texture:"actors/river.png",name:"item3",height:123},compId:63},{type:"Sprite",props:{y:266,x:492,width:123,texture:"actors/river.png",name:"item4",height:123},compId:64},{type:"Sprite",props:{y:402,width:123,texture:"actors/river.png",name:"item0",height:123},compId:75},{type:"Sprite",props:{y:402,x:123,width:123,texture:"actors/river.png",name:"item1",height:123},compId:76},{type:"Sprite",props:{y:402,x:246,width:123,texture:"actors/river.png",name:"item2",height:123},compId:77},{type:"Sprite",props:{y:402,x:369,width:123,texture:"actors/river.png",name:"item3",height:123},compId:78},{type:"Sprite",props:{y:402,x:492,width:123,texture:"actors/river.png",name:"item4",height:123},compId:79}]},{type:"Box",props:{y:120,x:282,var:"boatSprite"},compId:73,child:[{type:"Sprite",props:{width:261,texture:"actors/boat.png",height:190},compId:67},{type:"Sprite",props:{y:21,x:115,width:87,texture:"actors/farmer.png",height:87},compId:69}]},{type:"Sprite",props:{y:36,x:516.5,width:84,var:"go",texture:"actors/go.png",height:84},compId:74}],loadList:["actors/riverbank.png","actors/cabbage.png","actors/sheep.png","actors/wolf.png","actors/river.png","actors/boat.png","actors/farmer.png","actors/go.png"],loadList3D:[]},e}(r);t.BackGroundUI=e,o("ui.BackGroundUI",e);var i=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"Scene",props:{width:1280,height:720},compId:2,child:[{type:"Sprite",props:{y:0,x:0,width:1284,texture:"actors/gameover.jpg",height:720},compId:5},{type:"Button",props:{y:587,x:510.5,width:263,var:"restartBtn",skin:"comp/button.png",labelSize:60,labelColors:"#ffffff",label:"重新开始",height:86},compId:4}],loadList:["actors/gameover.jpg","comp/button.png"],loadList3D:[]},e}(r);t.gameOverUI=i,o("ui.gameOverUI",i);var a=function(t){function e(){return t.call(this)||this}return __extends(e,t),e.prototype.createChildren=function(){t.prototype.createChildren.call(this),this.createView(e.uiView)},e.uiView={type:"Scene",props:{width:1280,height:720},compId:2,child:[{type:"Sprite",props:{y:0,x:0,texture:"actors/succeed.jpg"},compId:3},{type:"Button",props:{y:615,x:517,width:246,var:"againBtn",skin:"comp/button.png",labelSize:60,label:"再来一次",height:96},compId:4}],loadList:["actors/succeed.jpg","comp/button.png"],loadList3D:[]},e}(r);t.succeedUI=a,o("ui.succeedUI",a)}(i.ui||(i.ui={}))},{}]},{},[4]);